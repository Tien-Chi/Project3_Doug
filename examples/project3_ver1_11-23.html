<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.5/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.5/addons/p5.dom.js"></script>
    <script src="../lib/p5.speech.js"></script>
    <script>
        var myRec = new p5.SpeechRec(); // new P5.SpeechRec object
        //var myRec2 = new p5.SpeechRec(); // new P5.SpeechRec object
        var myVoice = new p5.Speech(); // new P5.Speech object
        var badRes = new p5.Speech();
        var goodRes = new p5.Speech();
        myRec.continuous = true; // do continuous recognition
        //myRec2.continuous = true; // do continuous recognition
        //myRec.interimResults = true; // allow partial recognition (faster, less accurate)
        var goodON = false;
        var badON = false;
        //test for github
        function setup() {
            // graphics stuff:
            createCanvas(800, 400);
            background(255, 255, 255);
            fill(0, 0, 0, 255);
            // instructions:
            textSize(32);
            textAlign(CENTER);
            text("How's your day", width / 2, height / 2);
            myRec.onResult = showResult;
            myRec.start();

        }

        function mousePressed() {
            //act as a switch
            myVoice.speak("How's your day")

        }


        function draw() {
            // why draw when you can click?
        }


        function showResult() {

            var mostrecentword = myRec.resultString;
            if (mostrecentword.indexOf("good") !== -1) {
                background(0, 255, 0);
                text("Tell me more about it", width / 2, height / 2);
                goodRes.speak("tell me more about it");
                goodON = true;
            } else if (mostrecentword.indexOf("bad") !== -1) {
                background(255, 0, 0);
                text("Should I cheer you up?", width / 2, height / 2);
                badRes.speak("Should I cheer you up?");
                //boolean to turn on answer for the next question (yes/no)
                badON = true;
                
            } else {
                console.log("do nothing")
                //if answer is not good or bad ask question "was it good or bad" (affordance)
            }
            if (mostrecentword.indexOf("yes") !== -1){
                background(255);
                if (badON === true){
                text("show cat pictures", width / 2, height / 2);
                }
                
            }
            if (mostrecentword.indexOf("no") !== -1 && badON === true){
                background(255);
                text("Alright (sad)", width / 2, height / 2);
                
            }
            console.log(mostrecentword);
           
        }


    </script>
</head>

<body>
</body>

</html>